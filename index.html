<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Δεν ξέρεις τι έχει το φυτό σου; Ρώτησέ το εδώ δωρεάν</title>
  <meta name="description" content="Περιέγραψε το πρόβλημα ή στείλε φωτογραφία και ο ψηφιακός γεωπονικός βοηθός θα σου πει τι πιθανότατα συμβαίνει." />

  <meta property="og:title" content="Ρώτα τον γεωπονικό βοηθό (δωρεάν)" />
  <meta property="og:description" content="Περιέγραψε το πρόβλημα ή στείλε φωτογραφία και πάρε καθοδήγηση." />
  <meta property="og:type" content="website" />

  <link rel="stylesheet" href="styles.css" />
  <meta name="google-site-verification" content="-8IbdX9QH7a0d1U0dV_gg7IfAERgZNyzzfyJsazH99s" />

</head>

<body>
  <main class="container">
    <header class="hero" style="--hero-img:url('images/hero.jpg')">
      <p class="micro">🌿 Ψηφιακός γεωπονικός βοηθός για κήπο & χωράφι</p>
      <h1>Δεν ξέρεις τι έχει το φυτό σου; Ρώτησέ το εδώ δωρεάν</h1>
      <p class="subtitle">
        Περιέγραψε το πρόβλημα (ή στείλε φωτογραφία) και ο ψηφιακός γεωπονικός βοηθός θα σου πει τι <em>πιθανότατα</em> συμβαίνει και τι να προσέξεις.
      </p>

      <div class="cta-row">
        <a class="btn" href="https://chatgpt.com/g/g-697a00cc10dc8191bb6da21a9766c727-geoponikos-boethos" target="_blank" rel="noopener">
          Ξεκίνα το chat (Free)
        </a>
      </div>

      <p class="micro">
        *Η καθοδήγηση είναι ενημερωτική και δεν αντικαθιστά επί τόπου αξιολόγηση από ειδικό.
      </p>
    </header>

    <section class="how">
      <h2>Πώς δουλεύει</h2>
      <ul>
        <li>Γράφεις τι παρατηρείς (π.χ. κηλίδες, κιτρίνισμα, έντομα).</li>
        <li>Ο βοηθός σε ρωτά 2–3 ερωτήσεις για να καταλάβει καλύτερα.</li>
        <li>Παίρνεις καθοδήγηση και επόμενα βήματα.</li>
      </ul>
    </section>

    <section class="examples">
      <h2>Παραδείγματα</h2>
      <div class="chips">
        <span>«Μαύρα στίγματα στα φύλλα ελιάς»</span>
        <span>«Κιτρίνισαν τα φύλλα ντομάτας»</span>
        <span>«Άσπρη σκόνη στα φύλλα αμπελιού»</span>
        <span>«Τρύπες στα φύλλα λεμονιάς»</span>
      </div>
    </section>

    <section>
  <h2>Συχνές ερωτήσεις</h2>
  <ul>
    <li><a href="ti-exei-i-elia-mou.html">Τι έχει η ελιά μου;</a></li>
    <li><a href="kitrinisma-fyllon-ntomatas.html">Κιτρίνισαν τα φύλλα ντομάτας</a></li>
    <li><a href="trypes-sta-fylla-fytou.html">Τρύπες στα φύλλα φυτού</a></li>
  </ul>
</section>

    <footer class="footer">
      <p>© <span id="y"></span> Agronomy Assistant</p>
    </footer>
  </main>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();
  </script>
<!-- Chat Widget -->
<div id="agroChatFab" style="position:fixed;right:18px;bottom:18px;z-index:9999;">
  <button id="agroOpen"
    style="border:none;border-radius:999px;padding:14px 16px;font-weight:700;cursor:pointer;
           background:linear-gradient(180deg,#7dd3a7,#4fbf8b);color:#0b1913;box-shadow:0 12px 28px rgba(79,191,139,0.35);">
    🌿 Ρώτησε τώρα
  </button>
</div>

<div id="agroModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.55);z-index:10000;">
  <div style="max-width:720px;margin:6vh auto;background:#0f1f17;border:1px solid #1f3f33;border-radius:18px;overflow:hidden;">
    <div style="display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid #1f3f33;">
      <div style="color:#e6f2eb;font-weight:800;">Γεωπονικός Βοηθός</div>
      <button id="agroClose" style="background:transparent;border:none;color:#a8c7b8;font-size:18px;cursor:pointer;">✕</button>
    </div>

    <div id="agroMsgs" style="height:58vh;overflow:auto;padding:16px;gap:10px;display:flex;flex-direction:column;"></div>

    <div style="display:flex;gap:10px;padding:12px;border-top:1px solid #1f3f33;">
      <input id="agroInput" placeholder="Π.χ. Κιτρίνισαν τα φύλλα της ντομάτας μου…"
        style="flex:1;padding:12px 12px;border-radius:12px;border:1px solid #1f3f33;background:#12281f;color:#e6f2eb;outline:none;">
      <button id="agroSend"
        style="border:none;border-radius:12px;padding:12px 14px;font-weight:800;cursor:pointer;
               background:linear-gradient(180deg,#7dd3a7,#4fbf8b);color:#0b1913;">
        Αποστολή
      </button>
    </div>
  </div>
</div>

<script>
  const API_URL = "agronomy-chat.valilisd1998.workers.dev";
  const storageKey = "agro_chat_history_v1";

  const openBtn = document.getElementById("agroOpen");
  const closeBtn = document.getElementById("agroClose");
  const modal = document.getElementById("agroModal");
  const msgs = document.getElementById("agroMsgs");
  const input = document.getElementById("agroInput");
  const sendBtn = document.getElementById("agroSend");

  function loadHistory() {
    try { return JSON.parse(localStorage.getItem(storageKey) || "[]"); }
    catch { return []; }
  }
  function saveHistory(h) {
    localStorage.setItem(storageKey, JSON.stringify(h));
  }

  function bubble(text, who) {
    const d = document.createElement("div");
    d.style.maxWidth = "85%";
    d.style.padding = "10px 12px";
    d.style.borderRadius = "14px";
    d.style.whiteSpace = "pre-wrap";
    d.style.lineHeight = "1.55";
    d.style.border = "1px solid #1f3f33";
    if (who === "user") {
      d.style.alignSelf = "flex-end";
      d.style.background = "#153329";
      d.style.color = "#e6f2eb";
    } else {
      d.style.alignSelf = "flex-start";
      d.style.background = "#12281f";
      d.style.color = "#e6f2eb";
    }
    d.textContent = text;
    msgs.appendChild(d);
    msgs.scrollTop = msgs.scrollHeight;
  }

  function render() {
    msgs.innerHTML = "";
    const h = loadHistory();
    if (h.length === 0) {
      bubble("Γράψε τι παρατηρείς (ή τι σε ανησυχεί) και θα σε καθοδηγήσω με γενικές, ασφαλείς οδηγίες.", "assistant");
    } else {
      for (const m of h) bubble(m.content, m.role);
    }
  }

  async function send() {
    const text = (input.value || "").trim();
    if (!text) return;

    const h = loadHistory();
    h.push({ role: "user", content: text });
    saveHistory(h);
    bubble(text, "user");
    input.value = "";

    const typingId = "__typing__";
    bubble("…", "assistant");

    try {
      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ messages: h })
      });
      const data = await res.json();

      // remove typing bubble (last one)
      msgs.removeChild(msgs.lastChild);

      const reply = data.reply || "Κάτι πήγε στραβά. Δοκίμασε ξανά.";
      bubble(reply, "assistant");
      h.push({ role: "assistant", content: reply });
      saveHistory(h);

    } catch (e) {
      msgs.removeChild(msgs.lastChild);
      bubble("Υπήρξε πρόβλημα σύνδεσης. Δοκίμασε ξανά σε λίγο.", "assistant");
    }
  }

  openBtn.addEventListener("click", () => { modal.style.display = "block"; render(); input.focus(); });
  closeBtn.addEventListener("click", () => { modal.style.display = "none"; });
  modal.addEventListener("click", (e) => { if (e.target === modal) modal.style.display = "none"; });

  sendBtn.addEventListener("click", send);
  input.addEventListener("keydown", (e) => { if (e.key === "Enter") send(); });
</script>

  
</body>
</html>


